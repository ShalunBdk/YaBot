# Бот Яндекс Мессенджера

## Содержание
- [Общее описание](#общее-описание)
- [Технические требования](#технические-требования)
- [Структура проекта](#структура-проекта)
- [Конфигурация](#конфигурация)
- [Основные функции](#основные-функции)
- [API и интеграции](#api-и-интеграции)
- [Мониторинг и логирование](#мониторинг-и-логирование)

---

## Общее описание

Это бот для Яндекс Мессенджера, разработанный для автоматизации взаимодействия с Active Directory (AD) и управления учетными записями пользователей. Основные возможности включают:
- Просмотр информации об учетных записях AD.
- Возможность сброса пароля пользователями.
- Автоматическое оповещение об истекающих паролях каждый день в 9:00 UTC.

Бот работает на основе API Яндекс Мессенджера и API Yandex 360, обеспечивая удобное управление корпоративными учетными записями через чат.

---

## Технические требования

- **Python**: Версия 3.11.
- **Зависимости**: Установите необходимые зависимости из файла `requirements.txt`.
- **API**: Требуется доступ к API Яндекс Мессенджера и API Yandex 360.

---

## Структура проекта
```
/project_root
├── deploy/
│ └── jobs/ # Конфигурационные файлы для развертывания в Nomad
├── src/
│ ├── services/ # Модули для работы с сервисами (AD, Yandex)
│ └── templates/ # Шаблоны для формирования ответов бота
├── config.py # Файл конфигурации
├── exceptions.py # Обработка ошибок
└── main.py # Основной файл проекта (обработка сообщений, таймер, запуск бота)
```

## Конфигурация

Для настройки бота необходимо указать следующие переменные окружения:

```plaintext
YANDEX_BOT_TOKEN = your_bot_token
AD_SERVER = 'ldaps://your_ad_server'
AD_USER = 'ldap_read@your_domain'
AD_PASSWORD = 'your_ldap_password'
AD_BASE_DN = 'OU=Users,OU=YourBusiness,DC=your_domain,DC=com'
AD_USER_FOR_PASS_CHANGE = 'YourPassChangerUser@your_domain'
AD_PASSWORD_FOR_PASS_CHANGE = 'password_for_passchanger'
API_TOKEN_360 = 'your_yandex_api_360_token'
ORG_ID = your_org_id
```

Настройка времени проверки и отправки уведомлений о истекающих паролях осуществляется в файле main.py:
```
# Планировщик проверки паролей (UTC Time)
schedule.every().day.at("09:00").do(checker.check_expiring_passwords)
```


## Основные функции
1. Просмотр информации об учетных записях AD :
    - Администраторы могут получить данные о пользователях из Active Directory.
2. Сброс пароля :
    - Пользователи могут самостоятельно сбросить свои пароли через бота.
3. Оповещения об истекающих паролях :
    - Ежедневные уведомления об истекших паролях отправляются в указанное время.
4. Отправка обратной связи :
    - Пользователи могут отправлять идеи или сообщать о проблемах через бота.


## API и интеграции
 - **Яндекс Мессенджер** : Взаимодействие с API Яндекс Мессенджера реализовано с помощью библиотеки yandex-bot-py .
 - **Active Directory** : Интеграция с AD позволяет получать и изменять данные учетных записей.
 - **Yandex 360 API** : Используется для дополнительного управления учетными записями.
